import requests

# Define the API endpoint as a variable
BASE_URL = 'https://blackrock-e7743166043-api-challenge-0.chals.io'

# Test GET request to see if the server responds
def test_get_request():
    try:
        response = requests.get(BASE_URL, verify=False)
        print(f"GET Status Code: {response.status_code}")
        print(f"GET Response: {response.text}")
    except Exception as e:
        print(f"GET request failed: {e}")

# Function to send a message to the API (POST request)
def send_message_to_api(message_content):
    endpoint = f'{BASE_URL}/save_message'
    headers = {
        'Content-Type': 'application/json',
        'User-Agent': 'Mozilla/5.0'  # Add a user agent just in case
    }
    data = {
        'message': message_content
    }

    try:
        # POST request with SSL verification disabled for testing
        response = requests.post(endpoint, headers=headers, json=data, verify=False)
        response.raise_for_status()  # Raise an error for bad responses
        return response.json()  # Try to parse as JSON
    except requests.exceptions.HTTPError as http_err:
        print(f'HTTP error occurred: {http_err}')
    except Exception as err:
        print(f'An error occurred: {err}')

# Test the API with a GET request and a POST request
if __name__ == "__main__":
    # Test GET request
    test_get_request()

    # Test POST request with message
    message_content = "wassapppppaaap"
    api_response = send_message_to_api(message_content)
    print(f"API POST Response: {api_response}")
